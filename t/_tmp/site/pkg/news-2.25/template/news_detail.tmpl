[%- OI.page_title( MSG( 'news.detail.page_title', news.title ) );
    OI.box_add( 'news_tools_box', news = news );
    DEFAULT theme = OI.theme_properties;
    PROCESS error_message;
    PROCESS status_message; -%]

[%- previous     = news.previous_in_list;
    next         = news.next_in_list;
    previous_url = ( previous )
                     ? OI.make_url( ACTION = 'news',
                                    TASK   = 'display',
                                    news_id = previous.id ) : '';
    next_url     = ( next )
                     ? OI.make_url( ACTION = 'news',
                                    TASK   = 'display',
                                    news_id = next.id ) : '';
    main_url     = OI.make_url( ACTION = 'news' ); -%]
<p align="center">
[% IF previous -%]
&lt;&lt; <a href="[% previous_url %]">[% previous.title %]</a> |
[% END -%]
<a href="[% main_url %]">[% MSG( 'news.detail.main_link' ) %]</a>
[% IF next -%]
| <a href="[% next_url %]">[% next.title %]</a> &gt;&gt;
[% END -%]
</p>

[% IF news.tmp_security_level >= OI.security_level.write %]
  [% edit_url = OI.make_url( ACTION  = 'news',
                             TASK    = 'display_form',
                             news_id = news.id ) -%]
[% END %]

<p align="right">[% MSG( 'news.detail.edit_link', edit_url ) %]</p>

<h2>[% MSG( 'news.detail.title' ) %]</h2>

[% INCLUDE news::news_item -%]

<h2>[% MSG( 'news.detail.comments' ) %]</h2>

[% OI.action_execute( 'show_comment_by_object', object => news ) %]
